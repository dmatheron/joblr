.span12
  .row-fluid
    .span2.hidden-phone
    .span6
      .well#profile
        = render 'show_profile', user: @user
    .span2
    .span2
      = render 'show_buttons', user: @user
      = render 'profile_email_modal'

- if user_signed_in?
  - if current_user == @user
    = mixpanel_event('Completed their profile')      if flash[:success] == t('flash.success.profile.created')
    = mixpanel_event('Sent profile by email',"{'From':'User'}") if flash[:success] && flash[:success].match(Regexp.new(t('flash.success.profile.shared.user', recipient_email: '.+')))
    - if flash[:success] == t('flash.success.profile.created') || flash[:success] == t('flash.success.profile.updated')
      = mixpanel_people(current_user)
  - else
    - if flash[:success] && flash[:success].match(Regexp.new(t('flash.success.profile.shared.other_user', fullname: @user.fullname, recipient_email: '.+')))
      = mixpanel_event('Sent profile by email',"{'From':'Other user'}")
    - else
      = mixpanel_event('Viewed profile',"{'From':'Other user'}")
- else
  - if flash[:success] && flash[:success].match(Regexp.new(t('flash.success.profile.shared.public_user', fullname: @user.fullname, recipient_email: '.+')))
    = mixpanel_event('Sent profile by email',"{'From':'Public user'}")
  - else
    = mixpanel_event('Viewed profile',"{'From':'Public user'}")
