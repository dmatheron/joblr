.span12
  .row-fluid
    .span2.hidden-phone
    .span6
      .well#profile
        = render 'show_identity',             user: @user
        = render 'show_experience_education', profile: @profile
        = render 'show_skills',               profile: @profile
        = render 'show_qualities',            profile: @profile
        = render 'show_more',                 user: @user, profile: @profile
    .span2
    .span2
      = render 'show_buttons', user: @user
      = render 'profile_email_modal'

- if user_signed_in?
  = mixpanel_identify(current_user.id)
  - if current_user == @user
    = mixpanel_event('Completed their profile')      if flash[:success] == t('flash.success.profile.created')
    = mixpanel_event('Sent profile by email (user)') if flash[:success] && flash[:success].match(Regexp.new(t('flash.success.profile.shared.user', recipient_email: '.+')))
    - if flash[:success] == t('flash.success.profile.created') || flash[:success] == t('flash.success.profile.updated')
      = mixpanel_people(current_user)
  - else
    - if flash[:success] && flash[:success].match(Regexp.new(t('flash.success.profile.shared.other_user', fullname: @user.fullname, recipient_email: '.+')))
      = mixpanel_event('Sent profile by email (other user)')
    - else
      = mixpanel_event('Viewed profile (other user)')
- else
  - if flash[:success] && flash[:success].match(Regexp.new(t('flash.success.profile.shared.public_user', fullname: @user.fullname, recipient_email: '.+')))
    = mixpanel_event('Sent profile by email (public user)')
  - else
    = mixpanel_event('Viewed profile (public user)')
